<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>D3 Axis Example</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.15/d3.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>D3 Axis Example</h1>
        <div id="chart"></div>
    </div>
</body>
<script type="text/javascript">

    var bardata = [];

        for (var i = 0; i < 10; i++) {
            bardata.push(Math.round(Math.random() * 100) + 10)
        }

        bardata.sort(function compareNumbers(a, b) {
            return a - b;
        });
        console.log(bardata); 

        var margin = { top: 30, right: 30, bottom: 40, left: 50 }

        var height = 400 - margin.top - margin.bottom,
            width = 600 - margin.left - margin.right,
            barWidth = 50,
            barOffset = 5;

        var colors = d3.scale.linear()
            .domain([0, bardata.length])
            .range(['yellow', 'red'])

        var yScale = d3.scale.linear()
            .domain([0, d3.max(bardata)])
            .range([0, height]);

        var xScale = d3.scale.ordinal()
            .domain(d3.range(0, bardata.length))
            .rangeBands([0, width], 0.2)


        var myChart = d3.select('#chart').append('svg')
            .style('background', '#C9D7D6')
            .attr('width', width + margin.left + margin.right)
            .attr('height', height + margin.top + margin.bottom)
            .append('g')
            .attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')')
            .selectAll('rect').data(bardata)
            .enter().append('rect')
            .style('fill', function (d, i) {
                return colors(i);
            })
            .attr('width', xScale.rangeBand())
            .attr('x', function (d, i) {
                return xScale(i);
            })
            .attr('height', 0)
            .attr('y', height)

     

        myChart.transition()
            .attr('height', function (d) {
                return yScale(d);
            })
            .attr('y', function (d) {
                return height - yScale(d);
            })
           
         var vGuideScale = d3.scale.linear()
            .domain([0, d3.max(bardata)])
            .range([height, 0]) 

        var vAxis = d3.svg.axis()
            .scale(vGuideScale)
            .orient('left')
            .ticks(10)

        var vGuide = d3.select('svg').append('g')
        vAxis(vGuide)
        vGuide.attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')')
        vGuide.selectAll('path')
            .style({ fill: 'none', stroke: "#333" })
        vGuide.selectAll('line')
            .style({ stroke: "#333" })

        var hAxis = d3.svg.axis()
            .scale(xScale)
            .orient('bottom')
            .tickValues(xScale.domain().filter(function (d, i) {
                return !(i % (bardata.length / 5));
            }))

        var hGuide = d3.select('svg').append('g')
        hAxis(hGuide)
        hGuide.attr('transform', 'translate(' + margin.left + ', ' + (height + margin.top) + ')')
        hGuide.selectAll('path')
            .style({ fill: 'none', stroke: "#333" })
        hGuide.selectAll('line')
            .style({ stroke: "#333" })


</script>
</html>